"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/audit";
exports.ids = ["pages/api/audit"];
exports.modules = {

/***/ "(api-node)/./lib/env.js":
/*!********************!*\
  !*** ./lib/env.js ***!
  \********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   useBlob: () => (/* binding */ useBlob)\n/* harmony export */ });\nconst isProduction =  false && 0;\nconst useBlob = isProduction && process.env.BLOB_READ_WRITE_TOKEN;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxNQUFNQSxlQUFlQyxNQUFxQyxJQUFJQSxDQUEwQixDQUFDO0FBRXpGLE1BQU1HLFVBQVVKLGdCQUFnQkMsUUFBUUMsR0FBRyxDQUFDRyxxQkFBcUIsQ0FBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2NocmlzdGlhbmtvbGIvRG9jdW1lbnRzL2Rldi9uZXh0LWxlYXJuaW5nL2F1ZGl0LXNpdGUvbGliL2Vudi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiICYmIHByb2Nlc3MuZW52LlZFUkNFTCA9PT0gXCIxXCI7XG5cbmV4cG9ydCBjb25zdCB1c2VCbG9iID0gaXNQcm9kdWN0aW9uICYmIHByb2Nlc3MuZW52LkJMT0JfUkVBRF9XUklURV9UT0tFTjtcbiJdLCJuYW1lcyI6WyJpc1Byb2R1Y3Rpb24iLCJwcm9jZXNzIiwiZW52IiwiVkVSQ0VMIiwidXNlQmxvYiIsIkJMT0JfUkVBRF9XUklURV9UT0tFTiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/env.js\n");

/***/ }),

/***/ "(api-node)/./lib/storage.js":
/*!************************!*\
  !*** ./lib/storage.js ***!
  \************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   storage: () => (/* binding */ storage)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var _vercel_blob__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vercel/blob */ \"@vercel/blob\");\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./env.js */ \"(api-node)/./lib/env.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vercel_blob__WEBPACK_IMPORTED_MODULE_2__]);\n_vercel_blob__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Local file system operations\nconst localStorage = {\n    async writeFile (filePath, content) {\n        const fullPath = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), filePath);\n        const dir = path__WEBPACK_IMPORTED_MODULE_1__.dirname(fullPath);\n        if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(dir)) {\n            fs__WEBPACK_IMPORTED_MODULE_0__.mkdirSync(dir, {\n                recursive: true\n            });\n        }\n        fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(fullPath, content);\n        return {\n            url: `/api/files?file=${filePath}`\n        };\n    },\n    async readFile (filePath) {\n        const fullPath = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), filePath);\n        return fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(fullPath);\n    },\n    async listFolders (prefix = 'reports/') {\n        const reportsDir = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), prefix);\n        if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(reportsDir)) return {\n            folders: []\n        };\n        const folders = fs__WEBPACK_IMPORTED_MODULE_0__.readdirSync(reportsDir, {\n            withFileTypes: true\n        }).filter((dirent)=>dirent.isDirectory()).map((dirent)=>{\n            const folderPath = path__WEBPACK_IMPORTED_MODULE_1__.join(reportsDir, dirent.name);\n            const files = fs__WEBPACK_IMPORTED_MODULE_0__.readdirSync(folderPath);\n            const stats = fs__WEBPACK_IMPORTED_MODULE_0__.statSync(folderPath);\n            return {\n                name: dirent.name,\n                created: stats.birthtime,\n                fileCount: files.length,\n                size: files.reduce((total, file)=>{\n                    const fileStats = fs__WEBPACK_IMPORTED_MODULE_0__.statSync(path__WEBPACK_IMPORTED_MODULE_1__.join(folderPath, file));\n                    return total + fileStats.size;\n                }, 0)\n            };\n        }).sort((a, b)=>new Date(b.created) - new Date(a.created));\n        return {\n            folders\n        };\n    },\n    async listFiles (folder) {\n        const folderPath = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), 'reports', folder);\n        if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(folderPath)) return {\n            files: []\n        };\n        const files = fs__WEBPACK_IMPORTED_MODULE_0__.readdirSync(folderPath).map((file)=>{\n            const filePath = path__WEBPACK_IMPORTED_MODULE_1__.join(folderPath, file);\n            const stats = fs__WEBPACK_IMPORTED_MODULE_0__.statSync(filePath);\n            return {\n                name: file,\n                size: stats.size,\n                created: stats.birthtime,\n                url: `/api/files?file=reports/${folder}/${file}`,\n                downloadUrl: `/api/files?file=reports/${folder}/${file}&download=true`\n            };\n        });\n        return {\n            files\n        };\n    },\n    async deleteFolder (folder) {\n        const folderPath = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), 'reports', folder);\n        if (fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(folderPath)) {\n            fs__WEBPACK_IMPORTED_MODULE_0__.rmSync(folderPath, {\n                recursive: true,\n                force: true\n            });\n        }\n        return {\n            success: true\n        };\n    }\n};\n// Vercel Blob operations\nconst blobStorage = {\n    async writeFile (filePath, content) {\n        const blob = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_2__.put)(filePath, content, {\n            access: 'public'\n        });\n        return {\n            url: blob.url\n        };\n    },\n    async readFile (filePath) {\n        // For blob, we return the URL instead of content\n        return filePath;\n    },\n    async listFolders (prefix = 'reports/') {\n        const { blobs } = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_2__.list)({\n            prefix\n        });\n        const folders = new Map();\n        blobs.forEach((blob)=>{\n            const pathParts = blob.pathname.split('/');\n            if (pathParts.length >= 3) {\n                const folderName = pathParts[1];\n                if (!folders.has(folderName)) {\n                    folders.set(folderName, {\n                        name: folderName,\n                        created: blob.uploadedAt,\n                        fileCount: 0,\n                        size: 0\n                    });\n                }\n                const folder = folders.get(folderName);\n                folder.fileCount++;\n                folder.size += blob.size;\n            }\n        });\n        const folderList = Array.from(folders.values()).sort((a, b)=>new Date(b.created) - new Date(a.created));\n        return {\n            folders: folderList\n        };\n    },\n    async listFiles (folder) {\n        const { blobs } = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_2__.list)({\n            prefix: `reports/${folder}/`\n        });\n        const files = blobs.map((blob)=>({\n                name: blob.pathname.split('/').pop(),\n                size: blob.size,\n                created: blob.uploadedAt,\n                url: blob.url,\n                downloadUrl: blob.downloadUrl\n            }));\n        return {\n            files\n        };\n    },\n    async deleteFolder (folder) {\n        const { blobs } = await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_2__.list)({\n            prefix: `reports/${folder}/`\n        });\n        for (const blob of blobs){\n            await (0,_vercel_blob__WEBPACK_IMPORTED_MODULE_2__.del)(blob.url);\n        }\n        return {\n            success: true\n        };\n    }\n};\n// Export the appropriate storage based on environment\nconst storage = _env_js__WEBPACK_IMPORTED_MODULE_3__.useBlob ? blobStorage : localStorage;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxJQUN6QzVCLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNLElBQUlDLEtBQUtELEVBQUVYLE9BQU8sSUFBSSxJQUFJWSxLQUFLRixFQUFFVixPQUFPO1FBRTFELE9BQU87WUFBRVosU0FBUzhDO1FBQVc7SUFDL0I7SUFFQSxNQUFNckIsV0FBVUMsTUFBTTtRQUNwQixNQUFNLEVBQUVTLEtBQUssRUFBRSxHQUFHLE1BQU0xRCxrREFBSUEsQ0FBQztZQUFFcUIsUUFBUSxDQUFDLFFBQVEsRUFBRTRCLE9BQU8sQ0FBQyxDQUFDO1FBQUM7UUFFNUQsTUFBTWpCLFFBQVEwQixNQUFNN0IsR0FBRyxDQUFDMkIsQ0FBQUEsT0FBUztnQkFDL0J6QixNQUFNeUIsS0FBS00sUUFBUSxDQUFDQyxLQUFLLENBQUMsS0FBS1UsR0FBRztnQkFDbENsQyxNQUFNaUIsS0FBS2pCLElBQUk7Z0JBQ2ZKLFNBQVNxQixLQUFLVyxVQUFVO2dCQUN4QmxELEtBQUt1QyxLQUFLdkMsR0FBRztnQkFDYmlDLGFBQWFNLEtBQUtOLFdBQVc7WUFDL0I7UUFFQSxPQUFPO1lBQUVsQjtRQUFNO0lBQ2pCO0lBRUEsTUFBTW1CLGNBQWFGLE1BQU07UUFDdkIsTUFBTSxFQUFFUyxLQUFLLEVBQUUsR0FBRyxNQUFNMUQsa0RBQUlBLENBQUM7WUFBRXFCLFFBQVEsQ0FBQyxRQUFRLEVBQUU0QixPQUFPLENBQUMsQ0FBQztRQUFDO1FBRTVELEtBQUssTUFBTU8sUUFBUUUsTUFBTztZQUN4QixNQUFNekQsaURBQUdBLENBQUN1RCxLQUFLdkMsR0FBRztRQUNwQjtRQUVBLE9BQU87WUFBRXFDLFNBQVM7UUFBSztJQUN6QjtBQUNGO0FBRUEsc0RBQXNEO0FBQy9DLE1BQU1vQixVQUFVeEUsNENBQU9BLEdBQUdxRCxjQUFjcEQsYUFBYSIsInNvdXJjZXMiOlsiL1VzZXJzL2NocmlzdGlhbmtvbGIvRG9jdW1lbnRzL2Rldi9uZXh0LWxlYXJuaW5nL2F1ZGl0LXNpdGUvbGliL3N0b3JhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgcHV0LCBsaXN0LCBkZWwgfSBmcm9tICdAdmVyY2VsL2Jsb2InO1xuaW1wb3J0IHsgdXNlQmxvYiB9IGZyb20gJy4vZW52LmpzJztcblxuLy8gTG9jYWwgZmlsZSBzeXN0ZW0gb3BlcmF0aW9uc1xuY29uc3QgbG9jYWxTdG9yYWdlID0ge1xuICBhc3luYyB3cml0ZUZpbGUoZmlsZVBhdGgsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBmaWxlUGF0aCk7XG4gICAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKGZ1bGxQYXRoKTtcbiAgICBcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuICAgICAgZnMubWtkaXJTeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuICAgIFxuICAgIGZzLndyaXRlRmlsZVN5bmMoZnVsbFBhdGgsIGNvbnRlbnQpO1xuICAgIHJldHVybiB7IHVybDogYC9hcGkvZmlsZXM/ZmlsZT0ke2ZpbGVQYXRofWAgfTtcbiAgfSxcblxuICBhc3luYyByZWFkRmlsZShmaWxlUGF0aCkge1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIGZpbGVQYXRoKTtcbiAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKGZ1bGxQYXRoKTtcbiAgfSxcblxuICBhc3luYyBsaXN0Rm9sZGVycyhwcmVmaXggPSAncmVwb3J0cy8nKSB7XG4gICAgY29uc3QgcmVwb3J0c0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBwcmVmaXgpO1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhyZXBvcnRzRGlyKSkgcmV0dXJuIHsgZm9sZGVyczogW10gfTtcbiAgICBcbiAgICBjb25zdCBmb2xkZXJzID0gZnMucmVhZGRpclN5bmMocmVwb3J0c0RpciwgeyB3aXRoRmlsZVR5cGVzOiB0cnVlIH0pXG4gICAgICAuZmlsdGVyKGRpcmVudCA9PiBkaXJlbnQuaXNEaXJlY3RvcnkoKSlcbiAgICAgIC5tYXAoZGlyZW50ID0+IHtcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHBhdGguam9pbihyZXBvcnRzRGlyLCBkaXJlbnQubmFtZSk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gZnMucmVhZGRpclN5bmMoZm9sZGVyUGF0aCk7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gZnMuc3RhdFN5bmMoZm9sZGVyUGF0aCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IGRpcmVudC5uYW1lLFxuICAgICAgICAgIGNyZWF0ZWQ6IHN0YXRzLmJpcnRodGltZSxcbiAgICAgICAgICBmaWxlQ291bnQ6IGZpbGVzLmxlbmd0aCxcbiAgICAgICAgICBzaXplOiBmaWxlcy5yZWR1Y2UoKHRvdGFsLCBmaWxlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlU3RhdHMgPSBmcy5zdGF0U3luYyhwYXRoLmpvaW4oZm9sZGVyUGF0aCwgZmlsZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRvdGFsICsgZmlsZVN0YXRzLnNpemU7XG4gICAgICAgICAgfSwgMClcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkKSAtIG5ldyBEYXRlKGEuY3JlYXRlZCkpO1xuICAgIFxuICAgIHJldHVybiB7IGZvbGRlcnMgfTtcbiAgfSxcblxuICBhc3luYyBsaXN0RmlsZXMoZm9sZGVyKSB7XG4gICAgY29uc3QgZm9sZGVyUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncmVwb3J0cycsIGZvbGRlcik7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGZvbGRlclBhdGgpKSByZXR1cm4geyBmaWxlczogW10gfTtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKGZvbGRlclBhdGgpLm1hcChmaWxlID0+IHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKGZvbGRlclBhdGgsIGZpbGUpO1xuICAgICAgY29uc3Qgc3RhdHMgPSBmcy5zdGF0U3luYyhmaWxlUGF0aCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGZpbGUsXG4gICAgICAgIHNpemU6IHN0YXRzLnNpemUsXG4gICAgICAgIGNyZWF0ZWQ6IHN0YXRzLmJpcnRodGltZSxcbiAgICAgICAgdXJsOiBgL2FwaS9maWxlcz9maWxlPXJlcG9ydHMvJHtmb2xkZXJ9LyR7ZmlsZX1gLFxuICAgICAgICBkb3dubG9hZFVybDogYC9hcGkvZmlsZXM/ZmlsZT1yZXBvcnRzLyR7Zm9sZGVyfS8ke2ZpbGV9JmRvd25sb2FkPXRydWVgXG4gICAgICB9O1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7IGZpbGVzIH07XG4gIH0sXG5cbiAgYXN5bmMgZGVsZXRlRm9sZGVyKGZvbGRlcikge1xuICAgIGNvbnN0IGZvbGRlclBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3JlcG9ydHMnLCBmb2xkZXIpO1xuICAgIGlmIChmcy5leGlzdHNTeW5jKGZvbGRlclBhdGgpKSB7XG4gICAgICBmcy5ybVN5bmMoZm9sZGVyUGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH1cbn07XG5cbi8vIFZlcmNlbCBCbG9iIG9wZXJhdGlvbnNcbmNvbnN0IGJsb2JTdG9yYWdlID0ge1xuICBhc3luYyB3cml0ZUZpbGUoZmlsZVBhdGgsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBibG9iID0gYXdhaXQgcHV0KGZpbGVQYXRoLCBjb250ZW50LCB7XG4gICAgICBhY2Nlc3M6ICdwdWJsaWMnLFxuICAgIH0pO1xuICAgIHJldHVybiB7IHVybDogYmxvYi51cmwgfTtcbiAgfSxcblxuICBhc3luYyByZWFkRmlsZShmaWxlUGF0aCkge1xuICAgIC8vIEZvciBibG9iLCB3ZSByZXR1cm4gdGhlIFVSTCBpbnN0ZWFkIG9mIGNvbnRlbnRcbiAgICByZXR1cm4gZmlsZVBhdGg7XG4gIH0sXG5cbiAgYXN5bmMgbGlzdEZvbGRlcnMocHJlZml4ID0gJ3JlcG9ydHMvJykge1xuICAgIGNvbnN0IHsgYmxvYnMgfSA9IGF3YWl0IGxpc3QoeyBwcmVmaXggfSk7XG4gICAgY29uc3QgZm9sZGVycyA9IG5ldyBNYXAoKTtcbiAgICBcbiAgICBibG9icy5mb3JFYWNoKGJsb2IgPT4ge1xuICAgICAgY29uc3QgcGF0aFBhcnRzID0gYmxvYi5wYXRobmFtZS5zcGxpdCgnLycpO1xuICAgICAgaWYgKHBhdGhQYXJ0cy5sZW5ndGggPj0gMykge1xuICAgICAgICBjb25zdCBmb2xkZXJOYW1lID0gcGF0aFBhcnRzWzFdO1xuICAgICAgICBpZiAoIWZvbGRlcnMuaGFzKGZvbGRlck5hbWUpKSB7XG4gICAgICAgICAgZm9sZGVycy5zZXQoZm9sZGVyTmFtZSwge1xuICAgICAgICAgICAgbmFtZTogZm9sZGVyTmFtZSxcbiAgICAgICAgICAgIGNyZWF0ZWQ6IGJsb2IudXBsb2FkZWRBdCxcbiAgICAgICAgICAgIGZpbGVDb3VudDogMCxcbiAgICAgICAgICAgIHNpemU6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb2xkZXIgPSBmb2xkZXJzLmdldChmb2xkZXJOYW1lKTtcbiAgICAgICAgZm9sZGVyLmZpbGVDb3VudCsrO1xuICAgICAgICBmb2xkZXIuc2l6ZSArPSBibG9iLnNpemU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgZm9sZGVyTGlzdCA9IEFycmF5LmZyb20oZm9sZGVycy52YWx1ZXMoKSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmNyZWF0ZWQpIC0gbmV3IERhdGUoYS5jcmVhdGVkKSk7XG4gICAgXG4gICAgcmV0dXJuIHsgZm9sZGVyczogZm9sZGVyTGlzdCB9O1xuICB9LFxuXG4gIGFzeW5jIGxpc3RGaWxlcyhmb2xkZXIpIHtcbiAgICBjb25zdCB7IGJsb2JzIH0gPSBhd2FpdCBsaXN0KHsgcHJlZml4OiBgcmVwb3J0cy8ke2ZvbGRlcn0vYCB9KTtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IGJsb2JzLm1hcChibG9iID0+ICh7XG4gICAgICBuYW1lOiBibG9iLnBhdGhuYW1lLnNwbGl0KCcvJykucG9wKCksXG4gICAgICBzaXplOiBibG9iLnNpemUsXG4gICAgICBjcmVhdGVkOiBibG9iLnVwbG9hZGVkQXQsXG4gICAgICB1cmw6IGJsb2IudXJsLFxuICAgICAgZG93bmxvYWRVcmw6IGJsb2IuZG93bmxvYWRVcmxcbiAgICB9KSk7XG4gICAgXG4gICAgcmV0dXJuIHsgZmlsZXMgfTtcbiAgfSxcblxuICBhc3luYyBkZWxldGVGb2xkZXIoZm9sZGVyKSB7XG4gICAgY29uc3QgeyBibG9icyB9ID0gYXdhaXQgbGlzdCh7IHByZWZpeDogYHJlcG9ydHMvJHtmb2xkZXJ9L2AgfSk7XG4gICAgXG4gICAgZm9yIChjb25zdCBibG9iIG9mIGJsb2JzKSB7XG4gICAgICBhd2FpdCBkZWwoYmxvYi51cmwpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH1cbn07XG5cbi8vIEV4cG9ydCB0aGUgYXBwcm9wcmlhdGUgc3RvcmFnZSBiYXNlZCBvbiBlbnZpcm9ubWVudFxuZXhwb3J0IGNvbnN0IHN0b3JhZ2UgPSB1c2VCbG9iID8gYmxvYlN0b3JhZ2UgOiBsb2NhbFN0b3JhZ2U7Il0sIm5hbWVzIjpbImZzIiwicGF0aCIsInB1dCIsImxpc3QiLCJkZWwiLCJ1c2VCbG9iIiwibG9jYWxTdG9yYWdlIiwid3JpdGVGaWxlIiwiZmlsZVBhdGgiLCJjb250ZW50IiwiZnVsbFBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImRpciIsImRpcm5hbWUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwid3JpdGVGaWxlU3luYyIsInVybCIsInJlYWRGaWxlIiwicmVhZEZpbGVTeW5jIiwibGlzdEZvbGRlcnMiLCJwcmVmaXgiLCJyZXBvcnRzRGlyIiwiZm9sZGVycyIsInJlYWRkaXJTeW5jIiwid2l0aEZpbGVUeXBlcyIsImZpbHRlciIsImRpcmVudCIsImlzRGlyZWN0b3J5IiwibWFwIiwiZm9sZGVyUGF0aCIsIm5hbWUiLCJmaWxlcyIsInN0YXRzIiwic3RhdFN5bmMiLCJjcmVhdGVkIiwiYmlydGh0aW1lIiwiZmlsZUNvdW50IiwibGVuZ3RoIiwic2l6ZSIsInJlZHVjZSIsInRvdGFsIiwiZmlsZSIsImZpbGVTdGF0cyIsInNvcnQiLCJhIiwiYiIsIkRhdGUiLCJsaXN0RmlsZXMiLCJmb2xkZXIiLCJkb3dubG9hZFVybCIsImRlbGV0ZUZvbGRlciIsInJtU3luYyIsImZvcmNlIiwic3VjY2VzcyIsImJsb2JTdG9yYWdlIiwiYmxvYiIsImFjY2VzcyIsImJsb2JzIiwiTWFwIiwiZm9yRWFjaCIsInBhdGhQYXJ0cyIsInBhdGhuYW1lIiwic3BsaXQiLCJmb2xkZXJOYW1lIiwiaGFzIiwic2V0IiwidXBsb2FkZWRBdCIsImdldCIsImZvbGRlckxpc3QiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJwb3AiLCJzdG9yYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/storage.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Faudit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Faudit.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Faudit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Faudit.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_audit_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/api/audit.js */ \"(api-node)/./pages/api/audit.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_audit_js__WEBPACK_IMPORTED_MODULE_4__]);\n_pages_api_audit_js__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_audit_js__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_audit_js__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/audit\",\n        pathname: \"/api/audit\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_audit_js__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/audit\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/audit\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYXVkaXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmF1ZGl0LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNDO0FBQ3VDO0FBQ3JDO0FBQzFEO0FBQ2lEO0FBQ3VCO0FBQ0Y7QUFDdEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxnREFBUTtBQUNwQztBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRCxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBcUIsRUFBRSxFQUUxQjtBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBd0Q7QUFDcEU7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSw2Q0FBNkMsRUFBNkM7QUFDMUYsNENBQTRDLEtBQXdDO0FBQ3BGLGlDQUFpQyxLQUFvQztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBUztBQUNqQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VuZEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBpLXV0aWxzXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9hdWRpdC5qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdWRpdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1ZGl0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmQsXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9hdWRpdFwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcXVlcnksIHBhcmFtcywgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICAgICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgICAgIGNvbnN0IG9uUmVxdWVzdEVycm9yID0gcm91dGVNb2R1bGUuaW5zdHJ1bWVudGF0aW9uT25SZXF1ZXN0RXJyb3IuYmluZChyb3V0ZU1vZHVsZSk7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT5yb3V0ZU1vZHVsZS5yZW5kZXIocmVxLCByZXMsIHtcbiAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgYWxsb3dlZFJldmFsaWRhdGVIZWFkZXJLZXlzOiBwcm9jZXNzLmVudi5fX05FWFRfQUxMT1dFRF9SRVZBTElEQVRFX0hFQURFUlMsXG4gICAgICAgICAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlOiBCb29sZWFuKHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREUpLFxuICAgICAgICAgICAgICAgIHRydXN0SG9zdEhlYWRlcjogcHJvY2Vzcy5lbnYuX19ORVhUX1RSVVNUX0hPU1RfSEVBREVSLFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGdldCB0aGlzIGZyb20gZnJvbSBydW50aW1lIGVudiBzbyBtYW5pZmVzdFxuICAgICAgICAgICAgICAgIC8vIGRvZXNuJ3QgbmVlZCB0byBsb2FkXG4gICAgICAgICAgICAgICAgcHJldmlld1Byb3BzOiBwcmVyZW5kZXJNYW5pZmVzdC5wcmV2aWV3LFxuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUVycm9yOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkZXY6IHJvdXRlTW9kdWxlLmlzRGV2LFxuICAgICAgICAgICAgICAgIHBhZ2U6IFwiL2FwaS9hdWRpdFwiLFxuICAgICAgICAgICAgICAgIGludGVybmFsUmV2YWxpZGF0ZTogcm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5yZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6ICguLi5hcmdzKT0+b25SZXF1ZXN0RXJyb3IocmVxLCAuLi5hcmdzKVxuICAgICAgICAgICAgfSkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaW52b2tlUm91dGVNb2R1bGUpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyB3ZSByZS10aHJvdyBpbiBkZXYgdG8gc2hvdyB0aGUgZXJyb3Igb3ZlcmxheVxuICAgICAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzIGlzIHRlY2huaWNhbGx5IGFuIGludmFyaWFudCBhcyBlcnJvciBoYW5kbGluZ1xuICAgICAgICAvLyBzaG91bGQgYmUgZG9uZSBpbnNpZGUgb2YgYXBpLXJlc29sdmVyIG9uRXJyb3JcbiAgICAgICAgc2VuZEVycm9yKHJlcywgNTAwLCAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyk7XG4gICAgfSBmaW5hbGx5e1xuICAgICAgICAvLyBXZSBkb24ndCBhbGxvdyBhbnkgd2FpdFVudGlsIHdvcmsgaW4gcGFnZXMgQVBJIHJvdXRlcyBjdXJyZW50bHlcbiAgICAgICAgLy8gc28gaWYgY2FsbGJhY2sgaXMgcHJlc2VudCByZXR1cm4gd2l0aCByZXNvbHZlZCBwcm9taXNlIHNpbmNlIG5vXG4gICAgICAgIC8vIHBlbmRpbmcgd29ya1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Faudit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Faudit.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/audit.js":
/*!****************************!*\
  !*** ./pages/api/audit.js ***!
  \****************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var lighthouse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lighthouse */ \"lighthouse\");\n/* harmony import */ var chrome_launcher__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chrome-launcher */ \"chrome-launcher\");\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var _lib_storage_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/storage.js */ \"(api-node)/./lib/storage.js\");\n/* harmony import */ var _lib_env_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/env.js */ \"(api-node)/./lib/env.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([lighthouse__WEBPACK_IMPORTED_MODULE_3__, chrome_launcher__WEBPACK_IMPORTED_MODULE_4__, formidable__WEBPACK_IMPORTED_MODULE_5__, _lib_storage_js__WEBPACK_IMPORTED_MODULE_6__]);\n([lighthouse__WEBPACK_IMPORTED_MODULE_3__, chrome_launcher__WEBPACK_IMPORTED_MODULE_4__, formidable__WEBPACK_IMPORTED_MODULE_5__, _lib_storage_js__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst __filename = (0,url__WEBPACK_IMPORTED_MODULE_2__.fileURLToPath)(\"file:///Users/christiankolb/Documents/dev/next-learning/audit-site/pages/api/audit.js\");\nconst __dirname = path__WEBPACK_IMPORTED_MODULE_1__.dirname(__filename);\n// Device configurations\nconst configs = [\n    {\n        name: 'mobile',\n        formFactor: 'mobile',\n        screenEmulation: {\n            disabled: false\n        },\n        emulatedUserAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3 like Mac OS X)'\n    },\n    {\n        name: 'desktop',\n        formFactor: 'desktop',\n        screenEmulation: {\n            disabled: true\n        },\n        emulatedUserAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)'\n    }\n];\n// Store running tasks - using a simple object instead of Map for better serialization\nconst tasks = {};\nasync function runLighthouse(url, configName, configOverrides, outputDir) {\n    const chrome = await chrome_launcher__WEBPACK_IMPORTED_MODULE_4__.launch({\n        chromeFlags: [\n            '--headless',\n            '--incognito',\n            '--disable-extensions',\n            '--no-first-run',\n            '--no-default-browser-check'\n        ]\n    });\n    const options = {\n        logLevel: 'info',\n        output: [\n            'html',\n            'json'\n        ],\n        onlyCategories: [\n            'performance',\n            'accessibility',\n            'best-practices',\n            'seo'\n        ],\n        port: chrome.port,\n        emulatedFormFactor: configOverrides.formFactor,\n        screenEmulation: configOverrides.screenEmulation,\n        throttlingMethod: 'provided',\n        throttling: {\n            rttMs: 0,\n            throughputKbps: 0,\n            cpuSlowdownMultiplier: 1,\n            requestLatencyMs: 0,\n            downloadThroughputKbps: 0,\n            uploadThroughputKbps: 0\n        },\n        disableStorageReset: true\n    };\n    const result = await (0,lighthouse__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(url, options);\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const urlPath = new URL(url).pathname;\n    const pathnameSlug = urlPath === '/' ? 'home' : urlPath.replace(/\\W+/g, '-').replace(/^-|-$/g, '');\n    const filename = `${pathnameSlug}-${configName}-${timestamp}`;\n    const basePath = path__WEBPACK_IMPORTED_MODULE_1__.resolve(outputDir, filename);\n    if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(outputDir)) fs__WEBPACK_IMPORTED_MODULE_0__.mkdirSync(outputDir, {\n        recursive: true\n    });\n    fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(`${basePath}.html`, result.report[0]);\n    await chrome.kill();\n    return basePath;\n}\nasync function runBatch(config, taskId, configName = 'audit') {\n    try {\n        tasks[taskId] = {\n            status: 'running',\n            message: 'Starting audit...',\n            progress: 0\n        };\n        const now = new Date();\n        const dateStr = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}`;\n        const dateFolder = `${configName}-${dateStr}`;\n        const outputDir = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), 'reports', dateFolder);\n        const totalPages = config.paths.length * configs.length;\n        let completed = 0;\n        for (const pathname of config.paths){\n            const fullURL = `${config.base}${pathname}`;\n            for (const deviceConfig of configs){\n                await runLighthouse(fullURL, deviceConfig.name, deviceConfig, outputDir);\n                completed++;\n                tasks[taskId] = {\n                    status: 'running',\n                    message: `Processing ${completed}/${totalPages} pages...`,\n                    progress: completed / totalPages * 100\n                };\n            }\n        }\n        tasks[taskId] = {\n            status: 'completed',\n            message: 'Audit completed successfully!',\n            progress: 100,\n            reportPath: outputDir,\n            folderName: dateFolder\n        };\n    } catch (error) {\n        tasks[taskId] = {\n            status: 'error',\n            message: error.message\n        };\n    }\n}\nasync function handler(req, res) {\n    // Handle CORS\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS');\n    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');\n    if (req.method === 'OPTIONS') {\n        return res.status(200).end();\n    }\n    // Handle status check\n    if (req.method === 'GET') {\n        const { taskId } = req.query;\n        if (!taskId) {\n            return res.status(400).json({\n                message: 'Task ID required'\n            });\n        }\n        const task = tasks[taskId];\n        if (!task) {\n            return res.status(404).json({\n                message: 'Task not found'\n            });\n        }\n        return res.status(200).json(task);\n    }\n    // Handle file upload and start audit\n    if (req.method === 'POST') {\n        try {\n            let configData;\n            let configName = 'audit'; // Default name\n            // Check if request has JSON content type (from pre-configured sites)\n            if (req.headers['content-type']?.includes('application/json')) {\n                configData = req.body;\n                // Extract config name from the request body if available\n                configName = req.body.configName || 'audit';\n            } else {\n                // Handle file upload (form data)\n                const form = (0,formidable__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({});\n                const [fields, files] = await form.parse(req);\n                const configFile = files.config[0];\n                configData = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(configFile.filepath, 'utf8'));\n                // Extract filename without extension for folder naming\n                const originalFilename = configFile.originalFilename || configFile.newFilename;\n                if (originalFilename) {\n                    configName = originalFilename.replace('.json', '');\n                }\n            }\n            // Validate config\n            if (!configData.base || !configData.paths || !Array.isArray(configData.paths)) {\n                return res.status(400).json({\n                    message: 'Invalid configuration format'\n                });\n            }\n            const taskId = Date.now().toString();\n            // Start the audit in the background\n            runBatch(configData, taskId, configName);\n            return res.status(200).json({\n                taskId,\n                message: 'Audit started'\n            });\n        } catch (error) {\n            return res.status(500).json({\n                message: 'Failed to start audit',\n                error: error.message\n            });\n        }\n    }\n    return res.status(405).json({\n        message: 'Method not allowed'\n    });\n}\nconst config = {\n    api: {\n        bodyParser: {\n            sizeLimit: '50mb'\n        }\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDYyxXQUFXbEIsS0FBSyxJQUFJLENBQUNnQyxNQUFNQyxPQUFPLENBQUNmLFdBQVdsQixLQUFLLEdBQUc7Z0JBQzdFLE9BQU9XLElBQUkxQixNQUFNLENBQUMsS0FBSytCLElBQUksQ0FBQztvQkFBRTlCLFNBQVM7Z0JBQStCO1lBQ3hFO1lBRUEsTUFBTUYsU0FBU2xCLEtBQUtzQixHQUFHLEdBQUdJLFFBQVE7WUFFbEMsb0NBQW9DO1lBQ3BDVixTQUFTb0MsWUFBWWxDLFFBQVF6QztZQUU3QixPQUFPb0UsSUFBSTFCLE1BQU0sQ0FBQyxLQUFLK0IsSUFBSSxDQUFDO2dCQUFFaEM7Z0JBQVFFLFNBQVM7WUFBZ0I7UUFDakUsRUFBRSxPQUFPc0IsT0FBTztZQUNkLE9BQU9HLElBQUkxQixNQUFNLENBQUMsS0FBSytCLElBQUksQ0FBQztnQkFBRTlCLFNBQVM7Z0JBQXlCc0IsT0FBT0EsTUFBTXRCLE9BQU87WUFBQztRQUN2RjtJQUNGO0lBRUEsT0FBT3lCLElBQUkxQixNQUFNLENBQUMsS0FBSytCLElBQUksQ0FBQztRQUFFOUIsU0FBUztJQUFxQjtBQUM5RDtBQUVPLE1BQU1ILFNBQVM7SUFDcEJtRCxLQUFLO1FBQ0hDLFlBQVk7WUFDVkMsV0FBVztRQUNiO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyIvVXNlcnMvY2hyaXN0aWFua29sYi9Eb2N1bWVudHMvZGV2L25leHQtbGVhcm5pbmcvYXVkaXQtc2l0ZS9wYWdlcy9hcGkvYXVkaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gJ3VybCc7XG5pbXBvcnQgbGlnaHRob3VzZSBmcm9tICdsaWdodGhvdXNlJztcbmltcG9ydCAqIGFzIGNocm9tZUxhdW5jaGVyIGZyb20gJ2Nocm9tZS1sYXVuY2hlcic7XG5pbXBvcnQgZm9ybWlkYWJsZSBmcm9tICdmb3JtaWRhYmxlJztcbmltcG9ydCB7IHN0b3JhZ2UgfSBmcm9tICcuLi8uLi9saWIvc3RvcmFnZS5qcyc7XG5pbXBvcnQgeyB1c2VCbG9iIH0gZnJvbSAnLi4vLi4vbGliL2Vudi5qcyc7XG5cbmNvbnN0IF9fZmlsZW5hbWUgPSBmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBfX2Rpcm5hbWUgPSBwYXRoLmRpcm5hbWUoX19maWxlbmFtZSk7XG5cbi8vIERldmljZSBjb25maWd1cmF0aW9uc1xuY29uc3QgY29uZmlncyA9IFtcbiAgeyBuYW1lOiAnbW9iaWxlJywgZm9ybUZhY3RvcjogJ21vYmlsZScsIHNjcmVlbkVtdWxhdGlvbjogeyBkaXNhYmxlZDogZmFsc2UgfSwgZW11bGF0ZWRVc2VyQWdlbnQ6ICdNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDEwXzMgbGlrZSBNYWMgT1MgWCknIH0sXG4gIHsgbmFtZTogJ2Rlc2t0b3AnLCBmb3JtRmFjdG9yOiAnZGVza3RvcCcsIHNjcmVlbkVtdWxhdGlvbjogeyBkaXNhYmxlZDogdHJ1ZSB9LCBlbXVsYXRlZFVzZXJBZ2VudDogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpJyB9XG5dO1xuXG4vLyBTdG9yZSBydW5uaW5nIHRhc2tzIC0gdXNpbmcgYSBzaW1wbGUgb2JqZWN0IGluc3RlYWQgb2YgTWFwIGZvciBiZXR0ZXIgc2VyaWFsaXphdGlvblxuY29uc3QgdGFza3MgPSB7fTtcblxuYXN5bmMgZnVuY3Rpb24gcnVuTGlnaHRob3VzZSh1cmwsIGNvbmZpZ05hbWUsIGNvbmZpZ092ZXJyaWRlcywgb3V0cHV0RGlyKSB7XG4gIGNvbnN0IGNocm9tZSA9IGF3YWl0IGNocm9tZUxhdW5jaGVyLmxhdW5jaCh7XG4gICAgY2hyb21lRmxhZ3M6IFtcbiAgICAgICctLWhlYWRsZXNzJyxcbiAgICAgICctLWluY29nbml0bycsXG4gICAgICAnLS1kaXNhYmxlLWV4dGVuc2lvbnMnLFxuICAgICAgJy0tbm8tZmlyc3QtcnVuJyxcbiAgICAgICctLW5vLWRlZmF1bHQtYnJvd3Nlci1jaGVjaydcbiAgICBdXG4gIH0pO1xuICBcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBsb2dMZXZlbDogJ2luZm8nLFxuICAgIG91dHB1dDogWydodG1sJywgJ2pzb24nXSxcbiAgICBvbmx5Q2F0ZWdvcmllczogWydwZXJmb3JtYW5jZScsICdhY2Nlc3NpYmlsaXR5JywgJ2Jlc3QtcHJhY3RpY2VzJywgJ3NlbyddLFxuICAgIHBvcnQ6IGNocm9tZS5wb3J0LFxuICAgIGVtdWxhdGVkRm9ybUZhY3RvcjogY29uZmlnT3ZlcnJpZGVzLmZvcm1GYWN0b3IsXG4gICAgc2NyZWVuRW11bGF0aW9uOiBjb25maWdPdmVycmlkZXMuc2NyZWVuRW11bGF0aW9uLFxuICAgIHRocm90dGxpbmdNZXRob2Q6ICdwcm92aWRlZCcsXG4gICAgdGhyb3R0bGluZzoge1xuICAgICAgcnR0TXM6IDAsIHRocm91Z2hwdXRLYnBzOiAwLCBjcHVTbG93ZG93bk11bHRpcGxpZXI6IDEsXG4gICAgICByZXF1ZXN0TGF0ZW5jeU1zOiAwLCBkb3dubG9hZFRocm91Z2hwdXRLYnBzOiAwLCB1cGxvYWRUaHJvdWdocHV0S2JwczogMFxuICAgIH0sXG4gICAgZGlzYWJsZVN0b3JhZ2VSZXNldDogdHJ1ZSxcbiAgfTtcblxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBsaWdodGhvdXNlKHVybCwgb3B0aW9ucyk7XG4gIFxuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpO1xuICBjb25zdCB1cmxQYXRoID0gbmV3IFVSTCh1cmwpLnBhdGhuYW1lO1xuICBjb25zdCBwYXRobmFtZVNsdWcgPSB1cmxQYXRoID09PSAnLycgPyAnaG9tZScgOiB1cmxQYXRoLnJlcGxhY2UoL1xcVysvZywgJy0nKS5yZXBsYWNlKC9eLXwtJC9nLCAnJyk7XG4gIGNvbnN0IGZpbGVuYW1lID0gYCR7cGF0aG5hbWVTbHVnfS0ke2NvbmZpZ05hbWV9LSR7dGltZXN0YW1wfWA7XG4gIGNvbnN0IGJhc2VQYXRoID0gcGF0aC5yZXNvbHZlKG91dHB1dERpciwgZmlsZW5hbWUpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyhvdXRwdXREaXIpKSBmcy5ta2RpclN5bmMob3V0cHV0RGlyLCB7cmVjdXJzaXZlOiB0cnVlfSk7XG4gIFxuICBmcy53cml0ZUZpbGVTeW5jKGAke2Jhc2VQYXRofS5odG1sYCwgcmVzdWx0LnJlcG9ydFswXSk7XG4gIFxuICBhd2FpdCBjaHJvbWUua2lsbCgpO1xuICByZXR1cm4gYmFzZVBhdGg7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bkJhdGNoKGNvbmZpZywgdGFza0lkLCBjb25maWdOYW1lID0gJ2F1ZGl0Jykge1xuICB0cnkge1xuICAgIHRhc2tzW3Rhc2tJZF0gPSB7IHN0YXR1czogJ3J1bm5pbmcnLCBtZXNzYWdlOiAnU3RhcnRpbmcgYXVkaXQuLi4nLCBwcm9ncmVzczogMCB9O1xuICAgIFxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGF0ZVN0ciA9IGAke25vdy5nZXRGdWxsWWVhcigpfS0keyhub3cuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgIGNvbnN0IGRhdGVGb2xkZXIgPSBgJHtjb25maWdOYW1lfS0ke2RhdGVTdHJ9YDtcbiAgICBjb25zdCBvdXRwdXREaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3JlcG9ydHMnLCBkYXRlRm9sZGVyKTtcbiAgICBcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gY29uZmlnLnBhdGhzLmxlbmd0aCAqIGNvbmZpZ3MubGVuZ3RoO1xuICAgIGxldCBjb21wbGV0ZWQgPSAwO1xuICAgIFxuICAgIGZvciAoY29uc3QgcGF0aG5hbWUgb2YgY29uZmlnLnBhdGhzKSB7XG4gICAgICBjb25zdCBmdWxsVVJMID0gYCR7Y29uZmlnLmJhc2V9JHtwYXRobmFtZX1gO1xuICAgICAgZm9yIChjb25zdCBkZXZpY2VDb25maWcgb2YgY29uZmlncykge1xuICAgICAgICBhd2FpdCBydW5MaWdodGhvdXNlKGZ1bGxVUkwsIGRldmljZUNvbmZpZy5uYW1lLCBkZXZpY2VDb25maWcsIG91dHB1dERpcik7XG4gICAgICAgIGNvbXBsZXRlZCsrO1xuICAgICAgICB0YXNrc1t0YXNrSWRdID0ge1xuICAgICAgICAgIHN0YXR1czogJ3J1bm5pbmcnLFxuICAgICAgICAgIG1lc3NhZ2U6IGBQcm9jZXNzaW5nICR7Y29tcGxldGVkfS8ke3RvdGFsUGFnZXN9IHBhZ2VzLi4uYCxcbiAgICAgICAgICBwcm9ncmVzczogKGNvbXBsZXRlZCAvIHRvdGFsUGFnZXMpICogMTAwXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRhc2tzW3Rhc2tJZF0gPSB7XG4gICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgbWVzc2FnZTogJ0F1ZGl0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhJyxcbiAgICAgIHByb2dyZXNzOiAxMDAsXG4gICAgICByZXBvcnRQYXRoOiBvdXRwdXREaXIsXG4gICAgICBmb2xkZXJOYW1lOiBkYXRlRm9sZGVyXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0YXNrc1t0YXNrSWRdID0ge1xuICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAvLyBIYW5kbGUgQ09SU1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgT1BUSU9OUycpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZScpO1xuXG4gIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmVuZCgpO1xuICB9XG5cbiAgLy8gSGFuZGxlIHN0YXR1cyBjaGVja1xuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICBjb25zdCB7IHRhc2tJZCB9ID0gcmVxLnF1ZXJ5O1xuICAgIFxuICAgIGlmICghdGFza0lkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVGFzayBJRCByZXF1aXJlZCcgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRhc2sgPSB0YXNrc1t0YXNrSWRdO1xuICAgIGlmICghdGFzaykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Rhc2sgbm90IGZvdW5kJyB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHRhc2spO1xuICB9XG5cbiAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkIGFuZCBzdGFydCBhdWRpdFxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBjb25maWdEYXRhO1xuICAgICAgbGV0IGNvbmZpZ05hbWUgPSAnYXVkaXQnOyAvLyBEZWZhdWx0IG5hbWVcblxuICAgICAgLy8gQ2hlY2sgaWYgcmVxdWVzdCBoYXMgSlNPTiBjb250ZW50IHR5cGUgKGZyb20gcHJlLWNvbmZpZ3VyZWQgc2l0ZXMpXG4gICAgICBpZiAocmVxLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddPy5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgIGNvbmZpZ0RhdGEgPSByZXEuYm9keTtcbiAgICAgICAgLy8gRXh0cmFjdCBjb25maWcgbmFtZSBmcm9tIHRoZSByZXF1ZXN0IGJvZHkgaWYgYXZhaWxhYmxlXG4gICAgICAgIGNvbmZpZ05hbWUgPSByZXEuYm9keS5jb25maWdOYW1lIHx8ICdhdWRpdCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgZmlsZSB1cGxvYWQgKGZvcm0gZGF0YSlcbiAgICAgICAgY29uc3QgZm9ybSA9IGZvcm1pZGFibGUoe30pO1xuICAgICAgICBjb25zdCBbZmllbGRzLCBmaWxlc10gPSBhd2FpdCBmb3JtLnBhcnNlKHJlcSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25maWdGaWxlID0gZmlsZXMuY29uZmlnWzBdO1xuICAgICAgICBjb25maWdEYXRhID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoY29uZmlnRmlsZS5maWxlcGF0aCwgJ3V0ZjgnKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWN0IGZpbGVuYW1lIHdpdGhvdXQgZXh0ZW5zaW9uIGZvciBmb2xkZXIgbmFtaW5nXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlsZW5hbWUgPSBjb25maWdGaWxlLm9yaWdpbmFsRmlsZW5hbWUgfHwgY29uZmlnRmlsZS5uZXdGaWxlbmFtZTtcbiAgICAgICAgaWYgKG9yaWdpbmFsRmlsZW5hbWUpIHtcbiAgICAgICAgICBjb25maWdOYW1lID0gb3JpZ2luYWxGaWxlbmFtZS5yZXBsYWNlKCcuanNvbicsICcnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSBjb25maWdcbiAgICAgIGlmICghY29uZmlnRGF0YS5iYXNlIHx8ICFjb25maWdEYXRhLnBhdGhzIHx8ICFBcnJheS5pc0FycmF5KGNvbmZpZ0RhdGEucGF0aHMpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIGNvbmZpZ3VyYXRpb24gZm9ybWF0JyB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdGFza0lkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgXG4gICAgICAvLyBTdGFydCB0aGUgYXVkaXQgaW4gdGhlIGJhY2tncm91bmRcbiAgICAgIHJ1bkJhdGNoKGNvbmZpZ0RhdGEsIHRhc2tJZCwgY29uZmlnTmFtZSk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRhc2tJZCwgbWVzc2FnZTogJ0F1ZGl0IHN0YXJ0ZWQnIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHN0YXJ0IGF1ZGl0JywgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IHtcbiAgICAgIHNpemVMaW1pdDogJzUwbWInLFxuICAgIH0sXG4gIH0sXG59OyJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJmaWxlVVJMVG9QYXRoIiwibGlnaHRob3VzZSIsImNocm9tZUxhdW5jaGVyIiwiZm9ybWlkYWJsZSIsInN0b3JhZ2UiLCJ1c2VCbG9iIiwiX19maWxlbmFtZSIsInVybCIsIl9fZGlybmFtZSIsImRpcm5hbWUiLCJjb25maWdzIiwibmFtZSIsImZvcm1GYWN0b3IiLCJzY3JlZW5FbXVsYXRpb24iLCJkaXNhYmxlZCIsImVtdWxhdGVkVXNlckFnZW50IiwidGFza3MiLCJydW5MaWdodGhvdXNlIiwiY29uZmlnTmFtZSIsImNvbmZpZ092ZXJyaWRlcyIsIm91dHB1dERpciIsImNocm9tZSIsImxhdW5jaCIsImNocm9tZUZsYWdzIiwib3B0aW9ucyIsImxvZ0xldmVsIiwib3V0cHV0Iiwib25seUNhdGVnb3JpZXMiLCJwb3J0IiwiZW11bGF0ZWRGb3JtRmFjdG9yIiwidGhyb3R0bGluZ01ldGhvZCIsInRocm90dGxpbmciLCJydHRNcyIsInRocm91Z2hwdXRLYnBzIiwiY3B1U2xvd2Rvd25NdWx0aXBsaWVyIiwicmVxdWVzdExhdGVuY3lNcyIsImRvd25sb2FkVGhyb3VnaHB1dEticHMiLCJ1cGxvYWRUaHJvdWdocHV0S2JwcyIsImRpc2FibGVTdG9yYWdlUmVzZXQiLCJyZXN1bHQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZXBsYWNlIiwidXJsUGF0aCIsIlVSTCIsInBhdGhuYW1lIiwicGF0aG5hbWVTbHVnIiwiZmlsZW5hbWUiLCJiYXNlUGF0aCIsInJlc29sdmUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwid3JpdGVGaWxlU3luYyIsInJlcG9ydCIsImtpbGwiLCJydW5CYXRjaCIsImNvbmZpZyIsInRhc2tJZCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwcm9ncmVzcyIsIm5vdyIsImRhdGVTdHIiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImdldERhdGUiLCJkYXRlRm9sZGVyIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJ0b3RhbFBhZ2VzIiwicGF0aHMiLCJsZW5ndGgiLCJjb21wbGV0ZWQiLCJmdWxsVVJMIiwiYmFzZSIsImRldmljZUNvbmZpZyIsInJlcG9ydFBhdGgiLCJmb2xkZXJOYW1lIiwiZXJyb3IiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwiZW5kIiwicXVlcnkiLCJqc29uIiwidGFzayIsImNvbmZpZ0RhdGEiLCJoZWFkZXJzIiwiaW5jbHVkZXMiLCJib2R5IiwiZm9ybSIsImZpZWxkcyIsImZpbGVzIiwicGFyc2UiLCJjb25maWdGaWxlIiwiSlNPTiIsInJlYWRGaWxlU3luYyIsImZpbGVwYXRoIiwib3JpZ2luYWxGaWxlbmFtZSIsIm5ld0ZpbGVuYW1lIiwiQXJyYXkiLCJpc0FycmF5IiwiYXBpIiwiYm9keVBhcnNlciIsInNpemVMaW1pdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/audit.js\n");

/***/ }),

/***/ "@vercel/blob":
/*!*******************************!*\
  !*** external "@vercel/blob" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("@vercel/blob");;

/***/ }),

/***/ "chrome-launcher":
/*!**********************************!*\
  !*** external "chrome-launcher" ***!
  \**********************************/
/***/ ((module) => {

module.exports = import("chrome-launcher");;

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "lighthouse":
/*!*****************************!*\
  !*** external "lighthouse" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("lighthouse");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Faudit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Faudit.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();